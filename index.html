
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Introduction Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="docs/" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter active" data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="docs/">
            
                <a href="docs/">
            
                    
                    Tidepool uploader developer guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="docs/guide/FeatureOverview.html">
            
                <a href="docs/guide/FeatureOverview.html">
            
                    
                    Overview of features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="docs/guide/DirectoryStructure.html">
            
                <a href="docs/guide/DirectoryStructure.html">
            
                    
                    App & directory structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="docs/guide/Architecture.html">
            
                <a href="docs/guide/Architecture.html">
            
                    
                    Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="docs/guide/CodeStyle.html">
            
                <a href="docs/guide/CodeStyle.html">
            
                    
                    Code style
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="docs/state/">
            
                <a href="docs/state/">
            
                    
                    Application state via Redux
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="docs/state/ExampleStateTree.html">
            
                <a href="docs/state/ExampleStateTree.html">
            
                    
                    Example state tree
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="docs/state/StateTreeGlossary.html">
            
                <a href="docs/state/StateTreeGlossary.html">
            
                    
                    Glossary of state tree terms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="docs/state/CustomMiddleware.html">
            
                <a href="docs/state/CustomMiddleware.html">
            
                    
                    Custom middleware
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="docs/checklisttemplates/">
            
                <a href="docs/checklisttemplates/">
            
                    
                    checklist TEMPLATES
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="docs/checklisttemplates/BGMChecklist.html">
            
                <a href="docs/checklisttemplates/BGMChecklist.html">
            
                    
                    BGM Checklist
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="docs/checklisttemplates/CGMChecklist.html">
            
                <a href="docs/checklisttemplates/CGMChecklist.html">
            
                    
                    CGM Checklist
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="docs/checklisttemplates/PumpChecklist.html">
            
                <a href="docs/checklisttemplates/PumpChecklist.html">
            
                    
                    Insulin Pump Checklist
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="docs/checklists/">
            
                <a href="docs/checklists/">
            
                    
                    checklists
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="docs/checklists/abbottFreeStyleLibre.html">
            
                <a href="docs/checklists/abbottFreeStyleLibre.html">
            
                    
                    Abbott FreeStyle Libre CGM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="docs/checklists/abbottFreeStyleLite.html">
            
                <a href="docs/checklists/abbottFreeStyleLite.html">
            
                    
                    Abbott FreeStyle meters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="docs/checklists/abbottPrecisionXtra.html">
            
                <a href="docs/checklists/abbottPrecisionXtra.html">
            
                    
                    Abbott Precision Xtra
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="docs/checklists/avivaConnectAndGuide.html">
            
                <a href="docs/checklists/avivaConnectAndGuide.html">
            
                    
                    Accu-chek Aviva Connect & Guide (BGM)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="docs/checklists/animasCGM.html">
            
                <a href="docs/checklists/animasCGM.html">
            
                    
                    Animas Vibe CGM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.6" data-path="docs/checklists/animasPingAndVibe.html">
            
                <a href="docs/checklists/animasPingAndVibe.html">
            
                    
                    Animas Ping and Vibe Insulin Pumps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7" data-path="docs/checklists/bayerContourNext.html">
            
                <a href="docs/checklists/bayerContourNext.html">
            
                    
                    Ascensia/Bayer Contour Next meters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.8" data-path="docs/checklists/dexcom.html">
            
                <a href="docs/checklists/dexcom.html">
            
                    
                    Dexcom CGM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.9" data-path="docs/checklists/insuletOmniPod.html">
            
                <a href="docs/checklists/insuletOmniPod.html">
            
                    
                    Insulet OmniPod
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.10" data-path="docs/checklists/medtronic.html">
            
                <a href="docs/checklists/medtronic.html">
            
                    
                    Medtronic 5/7-series (pump data)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.11" data-path="docs/checklists/medtronicCGM.html">
            
                <a href="docs/checklists/medtronicCGM.html">
            
                    
                    Medtronic 5/7-series (CGM data)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.12" data-path="docs/checklists/medtronic600.html">
            
                <a href="docs/checklists/medtronic600.html">
            
                    
                    Medtronic 6-series (pump data)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.13" data-path="docs/checklists/medtronic600CGM.html">
            
                <a href="docs/checklists/medtronic600CGM.html">
            
                    
                    Medtronic 6-series (CGM data)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.14" data-path="docs/checklists/oneTouchUltra2.html">
            
                <a href="docs/checklists/oneTouchUltra2.html">
            
                    
                    OneTouch Ultra 2 meter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.15" data-path="docs/checklists/oneTouchUltraMini.html">
            
                <a href="docs/checklists/oneTouchUltraMini.html">
            
                    
                    OneTouch UltraMini meter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.16" data-path="docs/checklists/oneTouchVerio.html">
            
                <a href="docs/checklists/oneTouchVerio.html">
            
                    
                    OneTouch Verio, Verio Flex and Verio Reflect meters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.17" data-path="docs/checklists/oneTouchVerioIQ.html">
            
                <a href="docs/checklists/oneTouchVerioIQ.html">
            
                    
                    OneTouch VerioIQ meter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.18" data-path="docs/checklists/tandemCGM.html">
            
                <a href="docs/checklists/tandemCGM.html">
            
                    
                    Tandem G4 CGM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.19" data-path="docs/checklists/tandem.html">
            
                <a href="docs/checklists/tandem.html">
            
                    
                    Tandem Insulin Pumps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.20" data-path="docs/checklists/trividiaTrueMetrix.html">
            
                <a href="docs/checklists/trividiaTrueMetrix.html">
            
                    
                    Trividia TRUE METRIX meters
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" >
            
                <span>
            
                    
                    CLI tools
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="lib/drivers/carelink/cli/README.md">
            
                <span>
            
                    
                    CareLink CLI tool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="lib/drivers/insulet/cli/README.md">
            
                <span>
            
                    
                    OmniPod CLI tool
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="docs/misc/">
            
                <a href="docs/misc/">
            
                    
                    miscellaneous
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="docs/BootstrappingToUTC.html">
            
                <a href="docs/BootstrappingToUTC.html">
            
                    
                    "bootstrapping" to UTC (BtUTC)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="docs/misc/CSSModules.html">
            
                <a href="docs/misc/CSSModules.html">
            
                    
                    use of CSS modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.3" data-path="docs/misc/PWDSimulators.html">
            
                <a href="docs/misc/PWDSimulators.html">
            
                    
                    PWD "simulators"
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.4" data-path="docs/misc/FlatRateBasals.html">
            
                <a href="docs/misc/FlatRateBasals.html">
            
                    
                    challenges of flat basal profiles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.5" data-path="docs/misc/2015.06.29CareLinkCSVChanges.html">
            
                <a href="docs/misc/2015.06.29CareLinkCSVChanges.html">
            
                    
                    2015.06 CareLink CSV updates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.6" data-path="lib/medtronic/docs/packetStructure.md">
            
                <span>
            
                    
                    Medtronic packet diagrams
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Introduction</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="tidepool-uploader">Tidepool Uploader</h1>
<p><a href="https://circleci.com/gh/tidepool-org/uploader/tree/master" target="_blank"><img src="https://circleci.com/gh/tidepool-org/uploader/tree/master.svg?style=shield" alt="CircleCI"></a>
<a href="https://ci.appveyor.com/project/krystophv/uploader/branch/master" target="_blank"><img src="https://ci.appveyor.com/api/projects/status/jj71uykxm27s3mla/branch/master?svg=true" alt="Build status"></a></p>
<p>This is an <a href="https://electron.atom.io/" target="_blank">Electron App</a> that acts as an uploader client for Tidepool. It is intended to allow you to plug diabetes devices into your computer&apos;s USB port, read the data stored on them, and upload a standardized version of the data to the Tidepool cloud.</p>
<p>This README is focused on just the details of getting the uploader running locally. For more detailed information aimed at those working on the development of the uploader, please see the <a href="docs/StartHere.md">developer guide</a>.</p>
<h4 id="table-of-contents">Table of contents</h4>
<ul>
<li><a href="#how-to-set-it-up">Set Up</a></li>
<li><a href="#config">Config</a></li>
<li><a href="#tests">Tests</a></li>
<li><a href="#linting--code-style">Linting &amp; Code Style</a></li>
<li><a href="#docs">Docs</a></li>
<li><a href="#publishing">Publishing</a></li>
<li><a href="#use-of-lgpl-libraries">Use of LGPL libraries</a></li>
</ul>
<hr>
<h2 id="how-to-set-it-up">How to set it up</h2>
<ol>
<li>Clone this repository.</li>
<li>Make sure you have node v12.x installed. If you are managing node installations with <a href="https://github.com/creationix/nvm" title="GitHub: nvm" target="_blank"><code>nvm</code></a>, which we <strong>highly recommend</strong>, you can just do <code>nvm use</code> when navigating to this repository to switch to the correct version of node. (In this repository, the correct version of node will always be the version of node packaged by the version of Electron that we are using and specified in the <code>.nvmrc</code> file.)</li>
<li>Run <code>npm install</code> or, preferably, <code>yarn</code></li>
<li>Set the config for the environment you want to target (see <a href="#config">Config</a> below)</li>
<li>Run the following command:<pre><code class="lang-bash">$ npm run dev
</code></pre>
or<pre><code class="lang-bash">$ yarn dev
</code></pre>
(This will bundle the application with webpack and watch for changes. When it stops printing output you can continue to the next step.)</li>
</ol>
<p><strong>NB:</strong> React components and CSS will hot load after changes (this can be confirmed by watching the JavaScript console), but changes to device drivers and other code outside of the React components will not - use &apos;Reload&apos; to reload after such changes. If the compilation/hot reload of a component fails for any reason (e.g. from a syntax error) you may need to reinitialize the hot loader by reloading the application.</p>
<h3 id="docker-for-linux">Docker for Linux</h3>
<p>If you are running Linux you probably need to be using an Ubuntu distribution or derivative. To get around this for other distrubutions you can try to build a local docker image which is based on Ubuntu 18.04 and use the yarn/npm commands interactively.</p>
<p><strong>NOTE:</strong> You need to add udev rules to your host for uploads to actually work. You can find the udev rules <a href="resources/linux/51-tidepool-uploader.rules">here</a>. The file should be placed in <code>/etc/udev/rules.d/</code> and the host should be rebooted.</p>
<ol>
<li><p>Build the image
 <code>docker-compose build</code></p>
</li>
<li><p>Run it
 <code>docker-compose up -d</code></p>
</li>
<li><p>Work with it interactively.</p>
<p> Even if you kill the Tidepool Uploader GUI the container will continue to run. You can work with the yarn commands like you would locally by using docker exec.</p>
<p> <strong>Examples</strong></p>
<p> Interactively select the yarn target: <code>docker exec -it uploader bash -c &quot;yarn run&quot;</code></p>
<p> Rebuild: <code>docker exec -it uploader bash -c &quot;yarn build&quot;</code></p>
<p> Start the Dev GUI: <code>docker exec -it uploader bash -c &quot;yarn dev&quot;</code></p>
</li>
</ol>
<h2 id="config">Config</h2>
<p>Configuration values (for example the URL of the Tidepool Platform) are set via environment variables. If you need to add a config value, modify the <code>.config.js</code> file. If you need to read a config value inside the app, use <code>var config = require(&apos;./lib/config&apos;)</code>. To set config values (do this before building the app), you can use Shell scripts that export environment variables (see config/local.sh for an example that exports the appropriate variables when <a href="http://developer.tidepool.org/starting-up-services/" target="_blank">running the whole Tidepool platform locally using runservers</a>), for example:</p>
<pre><code class="lang-bash">$ <span class="hljs-built_in">source</span> config/local.sh
$ yarn start
</code></pre>
<h3 id="debug-modes">Debug Mode(s)</h3>
<p>For ease of development we have several debug features that developers can turn on and off at will (and to suit various development use cases, such as working on a new device driver versus working on the app&apos;s UI). Each of these debug features is set with an environment variable, but rather than being loaded through <code>.config.js</code> (as we do for production configuration variables, see above), we load these through the webpack <code>DefinePlugin</code> (see <a href="https://github.com/petehunt/webpack-howto#6-feature-flags" target="_blank">Pete Hunt&apos;s webpack-howto</a> for an example, although note Hunt uses the term &apos;feature flag&apos;).</p>
<h4 id="debugerror"><code>DEBUG_ERROR</code></h4>
<p>The environment variable <code>DEBUG_ERROR</code> (boolean) controls whether or not errors sourced in device drivers are caught and an error message displayed in the UI (the production setting) or whether they are thrown in the console (much more useful for local development because then the file name and line number of the error are easily accessible, along with a stack trace). <code>DEBUG_ERROR</code> mode is turned on by default in <code>config/device-debug.sh</code>.</p>
<p>This can also be toggled internally in the running Electron app via a right-click context menu available on the login screen, much like the menu for switching environments.</p>
<h3 id="local-development-wo-debug-modes">Local Development w/o Debug Mode(s)</h3>
<p>All debug options are turned <em>off</em> by default in <code>config/local.sh</code>.</p>
<h2 id="tests">Tests</h2>
<p>To run the tests in this repository as they are run on CircleCI and Appveyor use:</p>
<pre><code class="lang-bash">$ yarn <span class="hljs-built_in">test</span>
</code></pre>
<p>or</p>
<pre><code class="lang-bash">$ yarn <span class="hljs-built_in">test</span>
</code></pre>
<h2 id="linting--code-style">Linting &amp; Code Style</h2>
<p>We use <a href="http://eslint.org/" target="_blank">ESLint</a> to lint our JavaScript code. We try to use the same linting options across all our client apps, but there are a few exceptions in this application, noted with comments in the <code>.eslintrc</code> configuration file.</p>
<p>To run the linter (which also runs on CircleCI and Appveyor with every push, along with <code>npm test</code>), use:</p>
<pre><code>$ npm run lint
</code></pre><p>Aside from the (fairly minimal) JavaScript code style options we <em>enforce</em> through the linter, we ask that internal developers and external contributors try to match the style of the code in each module being modified. New modules should look to similar modules for style guidance. In React component code, use existing ES6/ES2015 components (not legacy ES5 components) as the style model for new components.</p>
<p><strong>NB: Please keep ES5 and ES6/ES2015 code distinct. Do <em>NOT</em> use ES6/ES2105 features in ES5 modules (most easily recognizable by the use of <code>require</code> rather than <code>import</code>).</strong></p>
<h2 id="docs">Docs</h2>
<p>Docs reside in several places in this repository, such as <code>docs/</code> and <code>lib/drivers/docs</code>. They are built as a static site with <a href="https://www.gitbook.com/" title="GitBook" target="_blank">GitBook</a> and served at <a href="http://developer.tidepool.org/" target="_blank">developer.tidepool.org</a> via <a href="https://pages.github.com/" title="GitHub Pages" target="_blank">GitHub Pages</a>.</p>
<p>See <a href="http://developer.tidepool.org/docs/" target="_blank">this guidance on our use of GitBook at Tidepool</a>.</p>
<h2 id="publishing">Publishing</h2>
<p>This section is Tidepool-specific. Release management and application updates are handled via the Github provider in the <code>electron-builder</code> project. The recommended workflow for a new production release is as follows:</p>
<ol>
<li>When you&apos;re working on what might become a new release, increment the version number in <code>package.json</code> and <code>app/package.json</code> and commit/push (on the branch)</li>
<li>The CI server(s) will create a draft release in Github with the title of the version from the <code>package.json</code> file and will automatically attach the distribution artifacts to that draft (drafts are not publicly visible)</li>
<li>When your pull request is approved and merged to <code>master</code>, go to the draft release and type in the version for the tag name, ensure that you&apos;re targeting the <code>master</code> branch, fill out the release notes and publish the release. This will create the tag for you.</li>
</ol>
<p>For a non-production release (alpha, dev, etc.)</p>
<ol>
<li>Increment the version number in <code>package.json</code> and <code>app/package.json</code> and ensure that you have included the channel information after the version patch number (i.e. <code>v0.304.0-alpha</code> or <code>v0.304.0-beta.2</code>). The hyphen separated version semantic is important.</li>
<li>The CI server(s) will create a draft release in Github with the title of the version from the <code>package.json</code> file and will automatically attach the distribution artifacts to that draft (drafts are not publicly visible)</li>
<li>When you want to publish your non-production release, go to your draft and type in the version for the tag name, ensure that you&apos;re targeting the branch that you&apos;re currently releasing from, mark the release as a <code>pre-release</code>, fill out the release notes and publish the release. This will create the tag for you on the branch that you want.</li>
</ol>
<p>The Uploader has a self-update mechanism that will look at the latest release and compare versions, downloading and prompting the user to update if a newer version is available. For production releases, only official releases will be considered. For non-production releases (<code>-alpha</code>, <code>-beta.2</code>, etc.) releases marked as <code>pre-release</code> will also be checked, matching against the string portion of the post-hyphen version segment. For more detail about this behavior see <a href="https://github.com/electron-userland/electron-builder/wiki/Auto-Update#appupdater--internaleventemitter" target="_blank">the electron-builder docs concerning auto-update options</a></p>
<h3 id="ci-server-environment-variables">CI server environment variables</h3>
<p>We use the following environment variables on the CI servers:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>CI Server</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td>APPLEID</td>
<td>CircleCI</td>
<td>Notarization</td>
</tr>
<tr>
<td>APPLEIDPASS</td>
<td>CircleCI</td>
<td>Notarization</td>
</tr>
<tr>
<td>AWS_ACCESS_KEY_ID</td>
<td>Both</td>
<td>S3 builds and AV e-mails</td>
</tr>
<tr>
<td>AWS_SECRET_ACESS_KEY</td>
<td>Both</td>
<td>S3 builds and AV e-mails</td>
</tr>
<tr>
<td>CSC_FOR_PULL_REQUEST</td>
<td>Both</td>
<td><code>true</code>, code signing for PR</td>
</tr>
<tr>
<td>CSC_KEY_PASSWORD</td>
<td>Both</td>
<td>Certificate password</td>
</tr>
<tr>
<td>CSC_LINK</td>
<td>Both</td>
<td>Code signing certificate</td>
</tr>
<tr>
<td>DEBUG</td>
<td>CircleCI</td>
<td>Set to <code>electron-builder</code></td>
</tr>
<tr>
<td>GH_TOKEN</td>
<td>Both</td>
<td>For GitHub builds</td>
</tr>
<tr>
<td>PUBLISH_FOR_PULL_REQUEST</td>
<td>Both</td>
<td><code>true</code>, build artefact for PR</td>
</tr>
<tr>
<td>ROLLBAR_POST_TOKEN</td>
<td>Both</td>
<td>Rollbar logging</td>
</tr>
<tr>
<td>FTP_AV_PASSWORD_TIDEPOOL</td>
<td>Appveyor</td>
<td>AV submission</td>
</tr>
</tbody>
</table>
<h2 id="editor-configuration">Editor Configuration</h2>
<p><strong>Atom</strong></p>
<pre><code class="lang-bash">apm install editorconfig es6-javascript javascript-snippets linter linter-eslint language-babel autocomplete-modules file-icons
</code></pre>
<p><strong>Sublime</strong></p>
<ul>
<li><a href="https://github.com/sindresorhus/editorconfig-sublime#readme" target="_blank">Editorconfig Integration</a></li>
<li><a href="https://github.com/SublimeLinter/SublimeLinter3" target="_blank">Linting</a></li>
<li><a href="https://github.com/roadhump/SublimeLinter-eslint" target="_blank">ESLint Integration</a></li>
<li><a href="https://github.com/babel/babel-sublime" target="_blank">Syntax Highlighting</a></li>
<li><a href="https://github.com/ternjs/tern_for_sublime" target="_blank">Autocompletion</a></li>
<li><a href="https://packagecontrol.io/packages/JavaScript%20%26%20NodeJS%20Snippets" target="_blank">Node Snippets</a></li>
<li><a href="https://packagecontrol.io/packages/ES6-Toolkit" target="_blank">ES6 Snippets</a></li>
</ul>
<p><strong>Others</strong></p>
<ul>
<li><a href="http://editorconfig.org/#download" target="_blank">Editorconfig</a></li>
<li><a href="http://eslint.org/docs/user-guide/integrations#editors" target="_blank">ESLint</a></li>
<li>Babel Syntax Plugin</li>
</ul>
<h2 id="devtools">DevTools</h2>
<h4 id="toggle-chrome-devtools">Toggle Chrome DevTools</h4>
<ul>
<li>OS X: <kbd>Cmd</kbd> <kbd>Alt</kbd> <kbd>I</kbd> or <kbd>F12</kbd></li>
<li>Linux: <kbd>Ctrl</kbd> <kbd>Shift</kbd> <kbd>I</kbd> or <kbd>F12</kbd></li>
<li>Windows: <kbd>Ctrl</kbd> <kbd>Shift</kbd> <kbd>I</kbd> or <kbd>F12</kbd></li>
</ul>
<p><em>See <a href="https://github.com/sindresorhus/electron-debug" target="_blank">electron-debug</a> for more information.</em></p>
<h4 id="devtools-extension">DevTools extension</h4>
<p>This project includes the following DevTools extensions:</p>
<ul>
<li><a href="https://github.com/electron/devtron" target="_blank">Devtron</a> - Install via <a href="https://github.com/sindresorhus/electron-debug" target="_blank">electron-debug</a>.</li>
<li><a href="https://github.com/facebook/react-devtools" target="_blank">React Developer Tools</a> - Install via <a href="https://github.com/GPMDP/electron-devtools-installer" target="_blank">electron-devtools-installer</a>.</li>
<li><a href="https://github.com/zalmoxisus/redux-devtools-extension" target="_blank">Redux DevTools</a> - Install via <a href="https://github.com/GPMDP/electron-devtools-installer" target="_blank">electron-devtools-installer</a>.</li>
</ul>
<p>You can find the tabs on Chrome DevTools.</p>
<p>If you want to update extensions version, please set <code>UPGRADE_EXTENSIONS</code> env, just run:</p>
<pre><code class="lang-bash">$ UPGRADE_EXTENSIONS=1 npm run dev

<span class="hljs-comment"># For Windows</span>
$ <span class="hljs-built_in">set</span> UPGRADE_EXTENSIONS=1 &amp;&amp; npm run dev
</code></pre>
<h2 id="css-modules">CSS Modules</h2>
<p>All <code>.module.less</code> files will be use css-modules.</p>
<h2 id="packaging">Packaging</h2>
<p>To package apps for the local platform:</p>
<pre><code class="lang-bash">$ npm run package
</code></pre>
<pre><code class="lang-bash">$ yarn package
</code></pre>
<p>To package apps with options:</p>
<pre><code class="lang-bash">$ npm run package -- --[option]
</code></pre>
<p>To package the app on your local machine, you need to set the <code>ROLLBAR_POST_TOKEN</code> environment variable to send telemetry data to Rollbar. You can get one for free from <a href="https://rollbar.com" target="_blank">https://rollbar.com</a></p>
<p>macOS: To notarize the app so that it will run on macOS Mojave, you need to set the environment variables <code>APPLEID</code> and <code>APPLEIDPASS</code>. Note that you need to set an app-specific password in <a href="https://appleid.apple.com" target="_blank">https://appleid.apple.com</a> for this to work.</p>
<h2 id="further-commands">Further commands</h2>
<p>To run the application without packaging run</p>
<pre><code class="lang-bash">$ npm run build
$ npm start
</code></pre>
<p>To run End-to-End Test</p>
<pre><code class="lang-bash">$ npm run build
$ npm run <span class="hljs-built_in">test</span><span class="hljs-_">-e</span>2e
</code></pre>
<h4 id="options">Options</h4>
<p>See <a href="https://github.com/electron-userland/electron-builder#cli-usage" target="_blank">electron-builder CLI Usage</a></p>
<h4 id="module-structure">Module Structure</h4>
<p>This project uses a <a href="https://github.com/electron-userland/electron-builder/wiki/Two-package.json-Structure" target="_blank">two package.json structure</a>.</p>
<ol>
<li>If the module is native to a platform or otherwise should be included with the published package (i.e. bcrypt, openbci), it should be listed under <code>dependencies</code> in <code>./app/package.json</code>.</li>
<li>If a module is <code>import</code>ed by another module, include it in <code>dependencies</code> in <code>./package.json</code>.   See <a href="https://github.com/benmosher/eslint-plugin-import/blob/master/docs/rules/no-extraneous-dependencies.md" target="_blank">this ESLint rule</a>.</li>
<li>Otherwise, modules used for building, testing and debugging should be included in <code>devDependencies</code> in <code>./package.json</code>.</li>
</ol>
<h2 id="use-of-lgpl-libraries">Use of LGPL libraries</h2>
<p>Tidepool Uploader makes use of the following LGPL-licensed libraries:</p>
<ul>
<li>libmtp (<a href="http://libmtp.sourceforge.net/" target="_blank">http://libmtp.sourceforge.net/</a>)</li>
<li>LZO implementation in libavutil, which is part of FFmpeg (<a href="https://github.com/FFmpeg/FFmpeg/tree/master/libavutil" target="_blank">https://github.com/FFmpeg/FFmpeg/tree/master/libavutil</a>)</li>
</ul>
<p>These libraries are used in the following Node.js modules created by Tidepool and are dependencies of the Tidepool Uploader:</p>
<ul>
<li><a href="https://github.com/tidepool-org/node-mtp" target="_blank">https://github.com/tidepool-org/node-mtp</a> (libmtp)</li>
<li><a href="https://github.com/tidepool-org/lzo-decompress" target="_blank">https://github.com/tidepool-org/lzo-decompress</a> (libavutil)</li>
</ul>
<p>The LGPL is intended to allow use of libraries in applications that don&#x2019;t necessarily distribute the source of the application. The LGPL has two requirements:</p>
<ul>
<li>users must have access to the source code of the library </li>
<li>users can make use of modified versions of the library</li>
</ul>
<p>To satisfy (1) we provide links to the relevant code repositories. To satisfy (2) we dynamically link to the library, so that it&#x2019;s possible to swap it out for another version of the library.</p>
<h3 id="impact-on-tidepool">Impact on Tidepool</h3>
<p>Compile FFmpeg ourselves to ensure that we&#x2019;re using the LGPL version and only include the minimal set of libraries
Use dynamic linking (e.g. on Windows this means using a .dll, and on MacOS a .dylib) when linking to these libraries
Mention that the software uses libraries from the FFmpeg project and libmtp under the LGPLv3, e.g. <code>This software uses code of &lt;a href=http://ffmpeg.org&gt;FFmpeg&lt;/a&gt; and &lt;a href=&#x201D;http://libmtp.sourceforge.net/&#x201D;&gt;libmtp&lt;/a&gt; licensed under the &lt;a href=a href=https://www.gnu.org/licenses/lgpl.html&gt;LGPLv3&lt;/a&gt; and its source can be downloaded &lt;a href=&#x201D;https://github.com/FFmpeg/FFmpeg/tree/master/libavutil&#x201D;&gt;here&lt;/a&gt; and &lt;a href=&#x201D;https://sourceforge.net/projects/libmtp/&#x201D;&gt;here&lt;/a&gt;</code></p>
<h3 id="impact-on-3rd-parties">Impact on 3rd parties</h3>
<p>If your EULA claims ownership over the code, you have to explicitly mention that you do not own FFmpeg or libmtp, and where the relevant owners can be found.</p>
<h3 id="references">References</h3>
<ul>
<li><a href="https://www.gnu.org/licenses/lgpl.html" target="_blank">LGPL v3 License Text</a> (on gnu.org)</li>
<li><a href="https://en.wikipedia.org/wiki/GNU_Lesser_General_Public_License" target="_blank">LGPL on Wikipedia</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="docs/" class="navigation navigation-next navigation-unique" aria-label="Next page: Tidepool uploader developer guide">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Introduction","level":"1.1","depth":1,"next":{"title":"Tidepool uploader developer guide","level":"1.2","depth":1,"path":"docs/README.md","ref":"docs/README.md","articles":[{"title":"Overview of features","level":"1.2.1","depth":2,"path":"docs/guide/FeatureOverview.md","ref":"docs/guide/FeatureOverview.md","articles":[]},{"title":"App & directory structure","level":"1.2.2","depth":2,"path":"docs/guide/DirectoryStructure.md","ref":"docs/guide/DirectoryStructure.md","articles":[]},{"title":"Architecture","level":"1.2.3","depth":2,"path":"docs/guide/Architecture.md","ref":"docs/guide/Architecture.md","articles":[]},{"title":"Code style","level":"1.2.4","depth":2,"path":"docs/guide/CodeStyle.md","ref":"docs/guide/CodeStyle.md","articles":[]},{"title":"Application state via Redux","level":"1.2.5","depth":2,"path":"docs/state/README.md","ref":"docs/state/README.md","articles":[{"title":"Example state tree","level":"1.2.5.1","depth":3,"path":"docs/state/ExampleStateTree.md","ref":"docs/state/ExampleStateTree.md","articles":[]},{"title":"Glossary of state tree terms","level":"1.2.5.2","depth":3,"path":"docs/state/StateTreeGlossary.md","ref":"docs/state/StateTreeGlossary.md","articles":[]},{"title":"Custom middleware","level":"1.2.5.3","depth":3,"path":"docs/state/CustomMiddleware.md","ref":"docs/state/CustomMiddleware.md","articles":[]}]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"README.md","mtime":"2021-07-20T09:14:41.822Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-07-21T15:09:50.108Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

